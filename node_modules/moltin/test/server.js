// Lets get our modules
var http   = require('http'),
	moltin = require('../dist/moltin.js')({
		publicId:  'umRG34nxZVGIuCSPfYf8biBSvtABgTR8GMUtflyE',
		secretKey: 'W0EMkTVKgfWOn88Z17ZAHVPaS9UVUEGVPou78GiI'
	})

// Port
const PORT = 8080; 

// We need a function which handles requests and send response
function handleRequest(request, response) {

	moltin.Authenticate(function() {

		moltin.Product.List({slug: 'lycksele-havet-twoseat-sofabed'}, function(products) {

			response.end('<pre>'+JSON.stringify(products)+'</pre>');
		}, function(type, msg) {

			response.end(type+' - '+msg);
		});

	});
}

// Create a server
var server = http.createServer(handleRequest);

// Lets start our server
server.listen(PORT, function() {
    // Callback triggered when server is successfully listening. Hurray!
    console.log("Server listening on: http://localhost:%s", PORT);
});